{% if rke_cluster_name is defined %}
cluster_name: {{ rke_cluster_name }}
{% endif %}
{% if rke_kubernetes_version is defined %}
kubernetes_version: {{ rke_kubernetes_version }}
{% endif %}
{% if rke_ignore_docker_version is defined %}
ignore_docker_version: {{ rke_ignore_docker_version }}
{% endif %}
ssh_key_path: {{ rke_ssh_key_file }}
nodes:
{% for host in groups['nodes'] if hostvars[host]['rke_node_group_name'] %}
  {%- set rke_node_group_name = hostvars[host]['rke_node_group_name'] %}
- address: {{ hostvars[host]['ansible_facts']['default_ipv4']['address'] }}
  hostname_override: {{ hostvars[host]['inventory_hostname_short'] | lower }}
  user: {{ rke_user | default('rke') }}
  {{ rke_node_groups[rke_node_group_name] | to_nice_yaml(indent=2) | indent(width=2) }}
{% endfor %}
